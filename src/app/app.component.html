<svg [attr.viewBox]="'0 0 ' + this.width + ' ' + this.height" preserveAspectRatio="none">
  <defs>
    <pattern id="faint-stars-1" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <circle fill="white" cx="01" cy="01" r="0.5" />
      <circle fill="white" cx="30" cy="50" r="0.5" />
      <circle fill="white" cx="55" cy="17" r="0.5" />
    </pattern>
    <pattern id="faint-stars-2" x="0" y="0" width="120" height="120" patternUnits="userSpaceOnUse">
      <circle fill="white" cx="10" cy="40" r="0.5" />
      <circle fill="white" cx="70" cy="52" r="0.5" />
    </pattern>
    <pattern id="bright-stars-1" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
      <circle fill="white" cx="15" cy="50" r="0.5" />
      <circle fill="white" cx="60" cy="15" r="0.5" />
    </pattern>
    <pattern id="bright-stars-2" x="0" y="0" width="140" height="140" patternUnits="userSpaceOnUse">
      <circle fill="white" cx="83" cy="75" r="0.5" />
    </pattern>
    <radialGradient id="sun-gradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="70%" style="stop-color:white;stop-opacity:1">
        <animate id="sunCoreDusk" attributeName="stop-color" values="white;orange" begin="-6s; sunCoreDusk.end + 28s"
          dur="12s"></animate>
      </stop>
      <stop offset="100%" style="stop-color:white;stop-opacity:0">
        <animate id="sunEdgeDusk" attributeName="stop-color" values="white;orange" begin="-6s; sunEdgeDusk.end + 28s"
          dur="12s"></animate>
      </stop>
    </radialGradient>
    <radialGradient id="corona-gradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%" style="stop-color:#ffe373;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffe373;stop-opacity:0" />
    </radialGradient>
    <radialGradient id="moon-gradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%" style="stop-color:#f5f3ce;stop-opacity:0.15" />
      <stop offset="100%" style="stop-color:#f5f3ce;stop-opacity:0" />
    </radialGradient>
    <pattern id="scene" x="0" y="0" [attr.width]="this.width" [attr.height]="this.height" patternUnits="userSpaceOnUse">
      <rect id="sky" [attr.width]="this.width" [attr.height]="this.height" fill="#87ceeb">
        <animate id="skyDusk" attributeType="XML" attributeName="fill" values="#87ceeb;#313251"
          begin="0s; skyDawn.end + 16s" dur="4s" fill="freeze" />
        <animate id="skyDawn" attributeType="XML" attributeName="fill" values="#313251;#87ceeb"
          begin="skyDusk.end + 16s" dur="4s" fill="freeze" />
      </rect>
      <g id="stars">
        <circle [attr.r]="this.diagonal" cx="0" [attr.cy]="this.height" fill="url(#faint-stars-1)" opacity="0">
          <animate id="faintStars1Dusk" attributeType="XML" attributeName="opacity" values="0;0.4"
            begin="4s; faintStars1Dawn.end + 22s" dur="4s" fill="freeze" />
          <animate id="faintStars1Dawn" attributeType="XML" attributeName="opacity" values="0.4;0"
            begin="faintStars1Dusk.end + 10s" dur="4s" fill="freeze" />
        </circle>
        <circle [attr.r]="this.diagonal" cx="0" [attr.cy]="this.height" fill="url(#faint-stars-2)" opacity="0">
          <animate id="faintStars2Dusk" attributeType="XML" attributeName="opacity" values="0;0.5"
            begin="4s; faintStars2Dawn.end + 22s" dur="4s" fill="freeze" />
          <animate id="faintStars2Dawn" attributeType="XML" attributeName="opacity" values="0.5;0"
            begin="faintStars2Dusk.end + 10s" dur="4s" fill="freeze" />
        </circle>
        <circle [attr.r]="this.diagonal" cx="0" [attr.cy]="this.height" fill="url(#bright-stars-1)" opacity="0">
          <animate id="brightStars1Dusk" attributeType="XML" attributeName="opacity" values="0;0.9"
            begin="4s; brightStars1Dawn.end + 22s" dur="4s" fill="freeze" />
          <animate id="brightStars1Dawn" attributeType="XML" attributeName="opacity" values="0.9;0"
            begin="brightStars1Dusk.end + 10s" dur="4s" fill="freeze" />
        </circle>
        <circle [attr.r]="this.diagonal" cx="0" [attr.cy]="this.height" fill="url(#bright-stars-2)" opacity="0">
          <animate id="brightStars2Dusk" attributeType="XML" attributeName="opacity" values="0;1"
            begin="4s; brightStars2Dawn.end + 22s" dur="4s" fill="freeze" />
          <animate id="brightStars2Dawn" attributeType="XML" attributeName="opacity" values="1;0"
            begin="brightStars2Dusk.end + 10s" dur="4s" fill="freeze" />
        </circle>
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" [attr.from]="[0, 0, this.height]"
          [attr.to]="[360, 0, this.height]" dur="120s" repeatCount="indefinite" />
      </g>
      <g id="sun">
        <ellipse cx="0" cy="0" rx="500" ry="300" fill="url(#corona-gradient)" opacity="0">
          <animate id="coronaOpacity" attributeType="XML" attributeName="opacity" values="0;1;0"
            begin="-6s; coronaOpacity.end + 28s" dur="12s" fill="freeze" />
        </ellipse>
        <circle r="10" fill="url(#sun-gradient)" />
        <animateMotion begin="-36s" dur="40s" repeatCount="indefinite"
          path="M-800,400 V300 C-800 -50, 800 -50, 800 300 V400" />
      </g>
      <g id="moon">
        <circle r="400" fill="url(#moon-gradient)" />
        <circle r="9" fill="#f5f3ce" />
        <animateMotion begin="-16s" dur="40s" repeatCount="indefinite"
          path="M-800,400 V300 C-800 -50, 800 -50, 800 300 V400" />
      </g>
      <g id="contourLines">
        <polygon [attr.points]="this.contourLinePointsBack">
          <animate id="backLineDusk" attributeType="XML" attributeName="fill" values="#78c4cd;#292a4b"
            begin="0s; backLineDawn.end + 16s" dur="4s" fill="freeze" />
          <animate id="backLineDawn" attributeType="XML" attributeName="fill" values="#292a4b;#78c4cd"
            begin="backLineDusk.end + 16s" dur="4s" fill="freeze" />
          <animateTransform attributeName="transform" attributeType="XML" type="translate" from="0,100"
            [attr.to]="[-this.contourLineBodyLength, 100]" dur="720s" repeatCount="indefinite" />
        </polygon>
        <polygon [attr.points]="this.contourLinePointsMiddle">
          <animate id="middleLineDusk" attributeType="XML" attributeName="fill" values="#4fa97c;#1e1f42"
            begin="0s; middleLineDawn.end + 16s" dur="4s" fill="freeze" />
          <animate id="middleLineDawn" attributeType="XML" attributeName="fill" values="#1e1f42;#4fa97c"
            begin="middleLineDusk.end + 16s" dur="4s" fill="freeze" />
          <animateTransform attributeName="transform" attributeType="XML" type="translate" from="0,160"
            [attr.to]="[-this.contourLineBodyLength, 160]" dur="120s" repeatCount="indefinite" />
        </polygon>
        <polygon [attr.points]="this.contourLinePointsFront">
          <animate id="frontLineDusk" attributeType="XML" attributeName="fill" values="#319540;#0a0c32"
            begin="0s; frontLineDawn.end + 16s" dur="4s" fill="freeze" />
          <animate id="frontLineDawn" attributeType="XML" attributeName="fill" values="#0a0c32;#319540"
            begin="frontLineDusk.end + 16s" dur="4s" fill="freeze" />
          <animateTransform attributeName="transform" attributeType="XML" type="translate" from="0,220"
            [attr.to]="[-this.contourLineBodyLength, 220]" dur="20s" repeatCount="indefinite" />
        </polygon>
      </g>
    </pattern>
    <filter id="displacementFilter">
      <feTurbulence type="turbulence" baseFrequency="0.2" numOctaves="2" result="turbulence" seed="1">
        <animate attributeType="XML" attributeName="seed" values="0;30" begin="0s;" dur="1s" repeatCount="indefinite" />
      </feTurbulence>
      <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="50" xChannelSelector="R" yChannelSelector="G"
        result="displacement" />
      <feGaussianBlur in="displacement" stdDeviation="1" />
    </filter>
    <pattern id="sceneMirror" x="0" y="0" [attr.width]="this.width" [attr.height]="this.height"
      patternUnits="userSpaceOnUse">
      <rect [attr.width]="this.width" [attr.height]="this.height" fill="url(#scene)"
        style="filter: url(#displacementFilter)" transform="translate(-24, 410) scale(1.05, -0.2)" />
      <rect [attr.width]="this.width" [attr.height]="this.height" opacity="0.6" fill="#0077be">
        <animate id="waterDusk" attributeType="XML" attributeName="fill" values="#0077be;#05061a"
          begin="0s;waterDawn.end + 16s" dur="4s" fill="freeze" />
        <animate id="waterDawn" attributeType="XML" attributeName="fill" values="#05061a;#0077be"
          begin="waterDusk.end + 16s" dur="4s" fill="freeze" />
      </rect>
    </pattern>
  </defs>
  <rect id="skyAndLand" [attr.width]="this.width" [attr.height]="this.height - 59" fill="url(#scene)" />
  <rect id="water" y="340" [attr.width]="this.width" [attr.height]="this.height - 340" fill="url(#sceneMirror)" />
</svg>