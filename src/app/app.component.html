<svg [attr.viewBox]="'0 0 ' + this.width + ' ' + this.height" preserveAspectRatio="none">
  <defs>
    <pattern id="faint-stars-1" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <circle fill="white" cx="01" cy="01" r="0.5" />
      <circle fill="white" cx="30" cy="50" r="0.5" />
      <circle fill="white" cx="55" cy="17" r="0.5" />
    </pattern>
    <pattern id="faint-stars-2" x="0" y="0" width="120" height="120" patternUnits="userSpaceOnUse">
      <circle fill="white" cx="10" cy="40" r="0.5" />
      <circle fill="white" cx="70" cy="52" r="0.5" />
    </pattern>
    <pattern id="bright-stars-1" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
      <circle fill="white" cx="15" cy="50" r="0.5" />
      <circle fill="white" cx="60" cy="15" r="0.5" />
    </pattern>
    <pattern id="bright-stars-2" x="0" y="0" width="140" height="140" patternUnits="userSpaceOnUse">
      <circle fill="white" cx="83" cy="75" r="0.5" />
    </pattern>
    <radialGradient id="sun-gradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="70%" style="stop-color:white;stop-opacity:1" animationId="sunCoreDusk"
        animationAttribute="stop-color" dailyOffset="-6s" dailyValues="white;orange" horDailyAnimation />
      <stop offset="100%" style="stop-color:white;stop-opacity:0" animationId="sunEdgeDusk"
        animationAttribute="stop-color" dailyOffset="-6s" dailyValues="white;orange" horDailyAnimation />
    </radialGradient>
    <radialGradient id="corona-gradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%" style="stop-color:#ffe373;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffe373;stop-opacity:0" />
    </radialGradient>
    <radialGradient id="moon-shadow-gradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="30%" style="stop-color:#313251;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#313251;stop-opacity:0" />
    </radialGradient>
    <radialGradient id="moon-gradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%" style="stop-color:#f5f3ce;stop-opacity:0.15" />
      <stop offset="100%" style="stop-color:#f5f3ce;stop-opacity:0" />
    </radialGradient>
    <pattern id="scene" x="0" y="0" [attr.width]="this.width" [attr.height]="this.height" patternUnits="userSpaceOnUse">
      <rect id="sky" [attr.width]="this.width" [attr.height]="this.height" fill="#87ceeb" animationId="sky"
        animationAttribute="fill" dawnOffset="20s" dawnValue="#87ceeb" duskOffset="0s" duskValue="#313251"
        horDawnDuskAnimation />
      <g id="stars">
        <circle [attr.r]="this.diagonal" cx="0" [attr.cy]="this.height" fill="url(#faint-stars-1)" opacity="0"
          animationId="faintStars1" animationAttribute="opacity" dawnOffset="16s" dawnValue="0" duskOffset="2s"
          duskValue="0.4" horDawnDuskAnimation />
        <circle [attr.r]="this.diagonal" cx="0" [attr.cy]="this.height" fill="url(#faint-stars-2)" opacity="0"
          animationId="faintStars2" animationAttribute="opacity" dawnOffset="16s" dawnValue="0" duskOffset="2s"
          duskValue="0.5" horDawnDuskAnimation />
        <circle [attr.r]="this.diagonal" cx="0" [attr.cy]="this.height" fill="url(#bright-stars-1)" opacity="0"
          animationId="brightStars1" animationAttribute="opacity" dawnOffset="16s" dawnValue="0" duskOffset="2s"
          duskValue="0.9" horDawnDuskAnimation />
        <circle [attr.r]="this.diagonal" cx="0" [attr.cy]="this.height" fill="url(#bright-stars-2)" opacity="0"
          animationId="brightStars2" animationAttribute="opacity" dawnOffset="16s" dawnValue="0" duskOffset="2s"
          duskValue="1" horDawnDuskAnimation />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" [attr.from]="[0, 0, this.height]"
          [attr.to]="[360, 0, this.height]" dur="120s" repeatCount="indefinite" />
      </g>
      <g id="sun" dailyOffset="-36s" horCelestialBodiesAnimation>
        <ellipse cx="0" cy="0" rx="500" ry="300" fill="url(#corona-gradient)" opacity="0" animationId="coronaOpacity"
          animationAttribute="opacity" dailyOffset="-6s" dailyValues="0;1;0" horDailyAnimation />
        <circle r="10" fill="url(#sun-gradient)" />
      </g>
      <g id="moon" dailyOffset="-16s" horCelestialBodiesAnimation>
        <circle r="50" fill="url(#moon-shadow-gradient)" />
        <circle r="400" fill="url(#moon-gradient)" />
        <circle r="9" fill="#f5f3ce" />
      </g>
      <g id="contourLines">
        <polygon [attr.points]="this.contourLinePointsBack" animationId="backLine" animationAttribute="fill"
          dawnOffset="20s" dawnValue="#78c4cd" duskOffset="0s" duskValue="#292a4b" horDawnDuskAnimation>
          <animateTransform attributeName="transform" attributeType="XML" type="translate" from="0,100"
            [attr.to]="[-this.contourLineBodyLength, 100]" dur="720s" repeatCount="indefinite" />
        </polygon>
        <polygon [attr.points]="this.contourLinePointsMiddle" animationId="middleLine" animationAttribute="fill"
          dawnOffset="20s" dawnValue="#4fa97c" duskOffset="0s" duskValue="#1e1f42" horDawnDuskAnimation>
          <animateTransform attributeName="transform" attributeType="XML" type="translate" from="0,160"
            [attr.to]="[-this.contourLineBodyLength, 160]" dur="120s" repeatCount="indefinite" />
        </polygon>
        <polygon [attr.points]="this.contourLinePointsFront" animationId="frontLine" animationAttribute="fill"
          dawnOffset="20s" dawnValue="#319540" duskOffset="0s" duskValue="#0a0c32" horDawnDuskAnimation>
          <animateTransform attributeName="transform" attributeType="XML" type="translate" from="0,220"
            [attr.to]="[-this.contourLineBodyLength, 220]" dur="20s" repeatCount="indefinite" />
        </polygon>
      </g>
    </pattern>
    <filter id="displacementFilter">
      <feTurbulence type="turbulence" baseFrequency="0.2" numOctaves="2" result="turbulence" seed="1">
        <animate attributeType="XML" attributeName="seed" values="0;30" begin="0s;" dur="1s" repeatCount="indefinite" />
      </feTurbulence>
      <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="50" xChannelSelector="R" yChannelSelector="G"
        result="displacement" />
      <feGaussianBlur in="displacement" stdDeviation="1" />
    </filter>
    <pattern id="sceneMirror" x="0" y="0" [attr.width]="this.width" [attr.height]="this.height"
      patternUnits="userSpaceOnUse">
      <rect [attr.width]="this.width" [attr.height]="this.height" fill="url(#scene)"
        style="filter: url(#displacementFilter)" transform="translate(-24, 410) scale(1.05, -0.2)" />
      <rect [attr.width]="this.width" [attr.height]="this.height" opacity="0.6" fill="#0077be" animationId="water"
        animationAttribute="fill" dawnOffset="20s" dawnValue="#0077be" duskOffset="0s" duskValue="#05061a"
        horDawnDuskAnimation />
    </pattern>
  </defs>
  <rect id="skyAndLand" [attr.width]="this.width" [attr.height]="this.height - 59" fill="url(#scene)" />
  <rect id="water" y="340" [attr.width]="this.width" [attr.height]="this.height - 340" fill="url(#sceneMirror)" />
</svg>